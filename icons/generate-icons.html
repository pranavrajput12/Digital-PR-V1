<!DOCTYPE html>
<html>
<head>
  <title>Generate Icons</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .preview {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    .icon-preview {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .icon {
      background: #f0f0f0;
      border: 1px solid #ddd;
      margin-bottom: 5px;
    }
    button {
      padding: 10px 20px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #45a049;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Extension Icon Generator</h1>
    <p>Click the button below to generate and download the extension icons.</p>
    
    <div>
      <button id="generateBtn">Generate Icons</button>
    </div>
    
    <div class="preview" id="preview">
      <!-- Icons will be displayed here -->
    </div>
  </div>

  <script>
    const sizes = [16, 32, 48, 128];
    const svgContent = `
      <svg width="128" height="128" viewBox="0 0 128 128" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="128" height="128" rx="25" fill="#4CAF50"/>
        <path d="M32 64C32 46.3269 46.3269 32 64 32C81.6731 32 96 46.3269 96 64C96 81.6731 81.6731 96 64 96C46.3269 96 32 81.6731 32 64Z" fill="white" fill-opacity="0.9"/>
        <path d="M64 40C51.85 40 42 49.85 42 62C42 74.15 51.85 84 64 84C76.15 84 86 74.15 86 62C86 49.85 76.15 40 64 40ZM64 76C55.16 76 48 68.84 48 60C48 51.16 55.16 44 64 44C72.84 44 80 51.16 80 60C80 68.84 72.84 76 64 76Z" fill="#4CAF50"/>
        <path d="M64 52C61.79 52 60 53.79 60 56C60 58.21 61.79 60 64 60C66.21 60 68 58.21 68 56C68 53.79 66.21 52 64 52Z" fill="#4CAF50"/>
      </svg>
    `;

    // Function to create and download a blob
    function downloadBlob(blob, filename) {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // Function to generate and download icons
    async function generateIcons() {
      const preview = document.getElementById('preview');
      preview.innerHTML = '';
      
      // Create a canvas to render the SVG at different sizes
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      
      // Create an image from the SVG
      const img = new Image();
      img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgContent)));
      
      await new Promise((resolve) => {
        img.onload = resolve;
      });
      
      // Generate each size
      for (const size of sizes) {
        // Set canvas size
        canvas.width = size;
        canvas.height = size;
        
        // Clear and draw the image
        ctx.clearRect(0, 0, size, size);
        ctx.drawImage(img, 0, 0, size, size);
        
        // Create a preview
        const previewDiv = document.createElement('div');
        previewDiv.className = 'icon-preview';
        
        const canvasCopy = document.createElement('canvas');
        canvasCopy.width = size;
        canvasCopy.height = size;
        canvasCopy.className = 'icon';
        canvasCopy.style.width = '100px';
        canvasCopy.style.height = '100px';
        canvasCopy.style.imageRendering = 'pixelated';
        
        const ctxCopy = canvasCopy.getContext('2d');
        ctxCopy.drawImage(canvas, 0, 0, size, size, 0, 0, 100, 100);
        
        const label = document.createElement('div');
        label.textContent = `icon${size}.png (${size}x${size})`;
        
        const downloadBtn = document.createElement('button');
        downloadBtn.textContent = 'Download';
        downloadBtn.style.fontSize = '12px';
        downloadBtn.style.padding = '5px 10px';
        downloadBtn.style.marginTop = '5px';
        downloadBtn.onclick = () => {
          canvas.toBlob((blob) => {
            downloadBlob(blob, `icon${size}.png`);
          }, 'image/png');
        };
        
        previewDiv.appendChild(canvasCopy);
        previewDiv.appendChild(label);
        previewDiv.appendChild(downloadBtn);
        preview.appendChild(previewDiv);
        
        // Download the file automatically
        canvas.toBlob((blob) => {
          downloadBlob(blob, `icon${size}.png`);
        }, 'image/png');
      }
    }

    // Add event listener to the generate button
    document.getElementById('generateBtn').addEventListener('click', generateIcons);
    
    // Generate icons automatically when the page loads
    window.addEventListener('load', generateIcons);
  </script>
</body>
</html>
